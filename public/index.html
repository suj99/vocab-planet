<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>è¯æ±‡æ˜Ÿçƒ - æ¯æ—¥è‹±è¯­å­¦ä¹ </title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Noto+Sans+SC:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --primary-light: #a5b4fc;
            --secondary: #f59e0b;
            --success: #10b981;
            --danger: #ef4444;
            --bg-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --card-bg: rgba(255, 255, 255, 0.95);
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --shadow-soft: 0 4px 20px rgba(0, 0, 0, 0.08);
            --shadow-medium: 0 8px 30px rgba(0, 0, 0, 0.12);
            --radius: 16px;
            --radius-sm: 10px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans SC', 'Nunito', sans-serif;
            background: var(--bg-gradient);
            min-height: 100vh;
            color: var(--text-primary);
            overflow-x: hidden;
        }

        /* èƒŒæ™¯è£…é¥° */
        .bg-decoration {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            overflow: hidden;
            pointer-events: none;
            z-index: 0;
        }

        .bg-circle {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            animation: float 20s ease-in-out infinite;
        }

        .bg-circle:nth-child(1) {
            width: 300px;
            height: 300px;
            top: -100px;
            right: -50px;
            animation-delay: 0s;
        }

        .bg-circle:nth-child(2) {
            width: 200px;
            height: 200px;
            bottom: 10%;
            left: -50px;
            animation-delay: -5s;
        }

        .bg-circle:nth-child(3) {
            width: 150px;
            height: 150px;
            top: 40%;
            right: 10%;
            animation-delay: -10s;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(5deg); }
        }

        /* ä¸»å®¹å™¨ */
        .app-container {
            position: relative;
            z-index: 1;
            max-width: 480px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
        }

        /* å¤´éƒ¨ */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0 20px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo-icon {
            width: 44px;
            height: 44px;
            background: white;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            box-shadow: var(--shadow-soft);
        }

        .logo-text {
            color: white;
            font-weight: 700;
            font-size: 1.3rem;
        }

        .settings-btn {
            width: 44px;
            height: 44px;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 12px;
            color: white;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.3s;
            backdrop-filter: blur(10px);
        }

        .settings-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: rotate(45deg);
        }

        /* ç»Ÿè®¡å¡ç‰‡ */
        .stats-card {
            background: var(--card-bg);
            border-radius: var(--radius);
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-medium);
        }

        .stats-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .stats-title {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .streak-badge {
            background: linear-gradient(135deg, #f59e0b, #f97316);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--primary);
            font-family: 'Nunito', sans-serif;
        }

        .stat-label {
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-top: 2px;
        }

        /* è¿›åº¦æ¡ */
        .progress-section {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #e2e8f0;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.85rem;
        }

        .progress-bar {
            height: 8px;
            background: #e2e8f0;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--primary-light));
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        /* å¯¼èˆªæ ‡ç­¾ */
        .nav-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
            overflow-x: auto;
            padding-bottom: 5px;
            -webkit-overflow-scrolling: touch;
        }

        .nav-tabs::-webkit-scrollbar {
            display: none;
        }

        .nav-tab {
            flex-shrink: 0;
            padding: 10px 18px;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 25px;
            color: white;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            backdrop-filter: blur(10px);
        }

        .nav-tab.active {
            background: white;
            color: var(--primary);
            box-shadow: var(--shadow-soft);
        }

        .nav-tab:hover:not(.active) {
            background: rgba(255, 255, 255, 0.35);
        }

        /* å†…å®¹åŒºåŸŸ */
        .content-section {
            display: none;
        }

        .content-section.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* å­¦ä¹ å¡ç‰‡ */
        .word-card {
            background: var(--card-bg);
            border-radius: var(--radius);
            padding: 30px 25px;
            text-align: center;
            box-shadow: var(--shadow-medium);
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
        }

        .word-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
        }

        .word-progress {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .word-english {
            font-family: 'Nunito', sans-serif;
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .word-phonetic {
            font-size: 1.1rem;
            color: var(--primary);
            margin-bottom: 15px;
            font-family: 'Nunito', sans-serif;
        }

        .word-chinese {
            font-size: 1.4rem;
            color: var(--text-primary);
            margin-bottom: 20px;
            font-weight: 600;
        }

        .word-category {
            display: inline-block;
            padding: 4px 12px;
            background: #f1f5f9;
            border-radius: 15px;
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .example-sentence {
            background: #f8fafc;
            border-radius: var(--radius-sm);
            padding: 15px;
            margin-top: 15px;
            text-align: left;
        }

        .example-label {
            font-size: 0.75rem;
            color: var(--text-secondary);
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .example-english {
            font-family: 'Nunito', sans-serif;
            font-size: 1rem;
            color: var(--text-primary);
            margin-bottom: 5px;
            line-height: 1.5;
        }

        .example-english .highlight {
            color: var(--primary);
            font-weight: 700;
        }

        .example-chinese {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* æŒ‰é’®ç»„ */
        .button-group {
            display: flex;
            gap: 12px;
        }

        .btn {
            flex: 1;
            padding: 14px 20px;
            border: none;
            border-radius: var(--radius-sm);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            box-shadow: 0 4px 15px rgba(99, 102, 241, 0.4);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(99, 102, 241, 0.5);
        }

        .btn-secondary {
            background: #f1f5f9;
            color: var(--text-primary);
        }

        .btn-secondary:hover {
            background: #e2e8f0;
        }

        .btn-success {
            background: linear-gradient(135deg, var(--success), #059669);
            color: white;
        }

        .btn-danger {
            background: linear-gradient(135deg, var(--danger), #dc2626);
            color: white;
        }

        .btn-outline {
            background: transparent;
            border: 2px solid rgba(255, 255, 255, 0.5);
            color: white;
        }

        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        /* æƒ…æ™¯æ¨¡å— */
        .scenario-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }

        .scenario-card {
            background: var(--card-bg);
            border-radius: var(--radius);
            padding: 20px 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: var(--shadow-soft);
            position: relative;
            overflow: hidden;
        }

        .scenario-card:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-medium);
        }

        .scenario-card.locked {
            opacity: 0.6;
        }

        .scenario-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .scenario-name {
            font-weight: 600;
            font-size: 1rem;
            margin-bottom: 5px;
        }

        .scenario-count {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .scenario-progress {
            position: absolute;
            bottom: 0;
            left: 0;
            height: 3px;
            background: var(--primary);
            transition: width 0.3s;
        }

        .lock-icon {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 0.9rem;
        }

        /* ç»ƒä¹ åŒºåŸŸ */
        .quiz-card {
            background: var(--card-bg);
            border-radius: var(--radius);
            padding: 25px;
            box-shadow: var(--shadow-medium);
            margin-bottom: 20px;
        }

        .quiz-type {
            font-size: 0.8rem;
            color: var(--primary);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .quiz-question {
            font-size: 1.2rem;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .quiz-question .blank {
            display: inline-block;
            min-width: 80px;
            border-bottom: 2px dashed var(--primary);
            margin: 0 5px;
        }

        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .quiz-option {
            padding: 14px 18px;
            background: #f8fafc;
            border: 2px solid transparent;
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1rem;
            text-align: left;
        }

        .quiz-option:hover {
            background: #f1f5f9;
            border-color: var(--primary-light);
        }

        .quiz-option.selected {
            border-color: var(--primary);
            background: #eef2ff;
        }

        .quiz-option.correct {
            border-color: var(--success);
            background: #ecfdf5;
        }

        .quiz-option.wrong {
            border-color: var(--danger);
            background: #fef2f2;
        }

        /* é˜…è¯»åŒºåŸŸ */
        .reading-card {
            background: var(--card-bg);
            border-radius: var(--radius);
            padding: 25px;
            box-shadow: var(--shadow-medium);
            margin-bottom: 20px;
        }

        .reading-title {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .reading-level {
            display: inline-block;
            padding: 3px 10px;
            background: var(--primary-light);
            color: var(--primary-dark);
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .reading-content {
            font-size: 1rem;
            line-height: 1.8;
            color: var(--text-primary);
        }

        .reading-content .vocab-word {
            color: var(--primary);
            font-weight: 600;
            cursor: pointer;
            border-bottom: 1px dotted var(--primary);
        }

        /* è®¾ç½®é¢æ¿ */
        .settings-panel {
            position: fixed;
            top: 0;
            right: -100%;
            width: 100%;
            max-width: 400px;
            height: 100%;
            background: white;
            z-index: 1000;
            transition: right 0.3s ease;
            overflow-y: auto;
        }

        .settings-panel.open {
            right: 0;
        }

        .settings-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
        }

        .settings-overlay.open {
            opacity: 1;
            visibility: visible;
        }

        .settings-header {
            padding: 20px;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .settings-title {
            font-size: 1.2rem;
            font-weight: 700;
        }

        .close-btn {
            width: 36px;
            height: 36px;
            background: #f1f5f9;
            border: none;
            border-radius: 50%;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .close-btn:hover {
            background: #e2e8f0;
        }

        .settings-content {
            padding: 20px;
        }

        .setting-group {
            margin-bottom: 25px;
        }

        .setting-label {
            font-weight: 600;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .setting-description {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-bottom: 10px;
        }

        .setting-input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e2e8f0;
            border-radius: var(--radius-sm);
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        .setting-input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .setting-slider {
            width: 100%;
            height: 6px;
            -webkit-appearance: none;
            background: #e2e8f0;
            border-radius: 3px;
            outline: none;
        }

        .setting-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            background: var(--primary);
            border-radius: 50%;
            cursor: pointer;
        }

        .slider-value {
            text-align: center;
            margin-top: 8px;
            font-weight: 600;
            color: var(--primary);
        }

        /* è¯æ±‡æç¤ºå¼¹çª— */
        .vocab-tooltip {
            position: fixed;
            background: white;
            padding: 15px;
            border-radius: var(--radius-sm);
            box-shadow: var(--shadow-medium);
            z-index: 100;
            max-width: 280px;
            display: none;
        }

        .vocab-tooltip.show {
            display: block;
            animation: tooltipIn 0.2s ease;
        }

        @keyframes tooltipIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        .tooltip-word {
            font-family: 'Nunito', sans-serif;
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--primary);
        }

        .tooltip-phonetic {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 5px;
        }

        .tooltip-meaning {
            font-size: 0.95rem;
        }

        /* å®ŒæˆåŠ¨ç”» */
        .completion-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1001;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
        }

        .completion-modal.show {
            opacity: 1;
            visibility: visible;
        }

        .completion-content {
            background: white;
            border-radius: var(--radius);
            padding: 40px 30px;
            text-align: center;
            max-width: 340px;
            transform: scale(0.8);
            transition: transform 0.3s;
        }

        .completion-modal.show .completion-content {
            transform: scale(1);
        }

        .completion-icon {
            font-size: 4rem;
            margin-bottom: 20px;
        }

        .completion-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .completion-message {
            color: var(--text-secondary);
            margin-bottom: 25px;
        }

        .completion-stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 25px;
        }

        .completion-stat {
            text-align: center;
        }

        .completion-stat-value {
            font-size: 2rem;
            font-weight: 800;
            color: var(--primary);
        }

        .completion-stat-label {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        /* å‘éŸ³æŒ‰é’® */
        .speak-btn {
            width: 44px;
            height: 44px;
            background: var(--primary-light);
            border: none;
            border-radius: 50%;
            color: var(--primary-dark);
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s;
            margin-bottom: 15px;
        }

        .speak-btn:hover {
            background: var(--primary);
            color: white;
            transform: scale(1.1);
        }

        /* å“åº”å¼ */
        @media (max-width: 380px) {
            .app-container {
                padding: 15px;
            }
            
            .word-english {
                font-size: 2rem;
            }
            
            .scenario-grid {
                gap: 10px;
            }
        }

        /* éšè—ç±» */
        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <!-- èƒŒæ™¯è£…é¥° -->
    <div class="bg-decoration">
        <div class="bg-circle"></div>
        <div class="bg-circle"></div>
        <div class="bg-circle"></div>
    </div>

    <!-- ä¸»åº”ç”¨ -->
    <div class="app-container">
        <!-- å¤´éƒ¨ -->
        <header class="header">
            <div class="logo">
                <div class="logo-icon">ğŸ“š</div>
                <span class="logo-text">è¯æ±‡æ˜Ÿçƒ</span>
            </div>
            <button class="settings-btn" onclick="toggleSettings()">âš™ï¸</button>
        </header>

        <!-- ç»Ÿè®¡å¡ç‰‡ -->
        <div class="stats-card">
            <div class="stats-header">
                <span class="stats-title">å­¦ä¹ è¿›åº¦</span>
                <div class="streak-badge">
                    <span>ğŸ”¥</span>
                    <span id="streakDays">3</span>å¤©è¿ç»­
                </div>
            </div>
            <div class="stats-grid">
                <div class="stat-item">
                    <div class="stat-value" id="learnedCount">45</div>
                    <div class="stat-label">å·²å­¦å•è¯</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="masteredCount">32</div>
                    <div class="stat-label">å·²æŒæ¡</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="todayCount">0</div>
                    <div class="stat-label">ä»Šæ—¥å­¦ä¹ </div>
                </div>
            </div>
            <div class="progress-section">
                <div class="progress-header">
                    <span>æ€»ä½“è¿›åº¦</span>
                    <span><span id="progressPercent">1.5</span>%</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 1.5%"></div>
                </div>
            </div>
        </div>

        <!-- å¯¼èˆªæ ‡ç­¾ -->
        <div class="nav-tabs">
            <button class="nav-tab active" data-tab="learn" onclick="switchTab('learn')">ğŸ“– ä»Šæ—¥å­¦ä¹ </button>
            <button class="nav-tab" data-tab="scenario" onclick="switchTab('scenario')">ğŸ­ æƒ…æ™¯ç»ƒä¹ </button>
            <button class="nav-tab" data-tab="quiz" onclick="switchTab('quiz')">âœï¸ å·©å›ºç»ƒä¹ </button>
            <button class="nav-tab" data-tab="reading" onclick="switchTab('reading')">ğŸ“° è¶£å‘³é˜…è¯»</button>
        </div>

        <!-- ä»Šæ—¥å­¦ä¹  -->
        <div class="content-section active" id="section-learn">
            <div class="word-card" id="wordCard">
                <div class="word-progress">ç¬¬ <span id="currentWordIndex">1</span> / <span id="totalWords">15</span> ä¸ªå•è¯</div>
                <button class="speak-btn" onclick="speakWord()">ğŸ”Š</button>
                <div class="word-english" id="wordEnglish">hello</div>
                <div class="word-phonetic" id="wordPhonetic">/hÉ™ËˆloÊŠ/</div>
                <div class="word-chinese" id="wordChinese">ä½ å¥½ï¼›å–‚</div>
                <div class="word-category" id="wordCategory">æ—¥å¸¸é—®å€™</div>
                <div class="example-sentence">
                    <div class="example-label">ä¾‹å¥</div>
                    <div class="example-english" id="exampleEnglish"><span class="highlight">Hello</span>, how are you today?</div>
                    <div class="example-chinese" id="exampleChinese">ä½ å¥½ï¼Œä½ ä»Šå¤©æ€ä¹ˆæ ·ï¼Ÿ</div>
                </div>
            </div>
            <div class="button-group">
                <button class="btn btn-secondary" onclick="markWord('hard')">ğŸ˜° ä¸è®¤è¯†</button>
                <button class="btn btn-primary" onclick="markWord('know')">ğŸ˜Š è®¤è¯†äº†</button>
            </div>
        </div>

        <!-- æƒ…æ™¯ç»ƒä¹  -->
        <div class="content-section" id="section-scenario">
            <div class="scenario-grid">
                <div class="scenario-card" onclick="startScenario('greetings')">
                    <div class="scenario-icon">ğŸ‘‹</div>
                    <div class="scenario-name">é—®å€™ä¸ä»‹ç»</div>
                    <div class="scenario-count">30ä¸ªè¯æ±‡</div>
                    <div class="scenario-progress" style="width: 60%"></div>
                </div>
                <div class="scenario-card" onclick="startScenario('weather')">
                    <div class="scenario-icon">ğŸŒ¤ï¸</div>
                    <div class="scenario-name">å¤©æ°”è¯é¢˜</div>
                    <div class="scenario-count">25ä¸ªè¯æ±‡</div>
                    <div class="scenario-progress" style="width: 30%"></div>
                </div>
                <div class="scenario-card" onclick="startScenario('restaurant')">
                    <div class="scenario-icon">ğŸ½ï¸</div>
                    <div class="scenario-name">é¤å…ç‚¹é¤</div>
                    <div class="scenario-count">40ä¸ªè¯æ±‡</div>
                    <div class="scenario-progress" style="width: 10%"></div>
                </div>
                <div class="scenario-card" onclick="startScenario('directions')">
                    <div class="scenario-icon">ğŸ—ºï¸</div>
                    <div class="scenario-name">é—®è·¯æŒ‡è·¯</div>
                    <div class="scenario-count">35ä¸ªè¯æ±‡</div>
                    <div class="scenario-progress" style="width: 0%"></div>
                </div>
                <div class="scenario-card" onclick="startScenario('shopping')">
                    <div class="scenario-icon">ğŸ›’</div>
                    <div class="scenario-name">è´­ç‰©æ¶ˆè´¹</div>
                    <div class="scenario-count">45ä¸ªè¯æ±‡</div>
                    <div class="scenario-progress" style="width: 0%"></div>
                </div>
                <div class="scenario-card" onclick="startScenario('transport')">
                    <div class="scenario-icon">ğŸšŒ</div>
                    <div class="scenario-name">äº¤é€šå‡ºè¡Œ</div>
                    <div class="scenario-count">30ä¸ªè¯æ±‡</div>
                    <div class="scenario-progress" style="width: 0%"></div>
                </div>
                <div class="scenario-card" onclick="startScenario('hotel')">
                    <div class="scenario-icon">ğŸ¨</div>
                    <div class="scenario-name">é…’åº—ä½å®¿</div>
                    <div class="scenario-count">35ä¸ªè¯æ±‡</div>
                    <div class="scenario-progress" style="width: 0%"></div>
                </div>
                <div class="scenario-card" onclick="startScenario('hospital')">
                    <div class="scenario-icon">ğŸ¥</div>
                    <div class="scenario-name">åŒ»é™¢å°±åŒ»</div>
                    <div class="scenario-count">40ä¸ªè¯æ±‡</div>
                    <div class="scenario-progress" style="width: 0%"></div>
                </div>
                <div class="scenario-card" onclick="startScenario('work')">
                    <div class="scenario-icon">ğŸ’¼</div>
                    <div class="scenario-name">å·¥ä½œèŒåœº</div>
                    <div class="scenario-count">50ä¸ªè¯æ±‡</div>
                    <div class="scenario-progress" style="width: 0%"></div>
                </div>
                <div class="scenario-card" onclick="startScenario('family')">
                    <div class="scenario-icon">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</div>
                    <div class="scenario-name">å®¶åº­ç”Ÿæ´»</div>
                    <div class="scenario-count">40ä¸ªè¯æ±‡</div>
                    <div class="scenario-progress" style="width: 0%"></div>
                </div>
            </div>
        </div>

        <!-- å·©å›ºç»ƒä¹  -->
        <div class="content-section" id="section-quiz">
            <div class="quiz-card">
                <div class="quiz-type">å¡«ç©ºç»ƒä¹ </div>
                <div class="quiz-question">
                    <span id="quizSentence">I want to <span class="blank"></span> a cup of coffee.</span>
                </div>
                <div class="quiz-options" id="quizOptions">
                    <button class="quiz-option" onclick="selectOption(this, 'drink')">drink</button>
                    <button class="quiz-option" onclick="selectOption(this, 'eat')">eat</button>
                    <button class="quiz-option" onclick="selectOption(this, 'buy')">buy</button>
                    <button class="quiz-option" onclick="selectOption(this, 'make')">make</button>
                </div>
            </div>
            <div class="button-group">
                <button class="btn btn-secondary" onclick="skipQuiz()">è·³è¿‡</button>
                <button class="btn btn-primary" onclick="checkAnswer()">ç¡®è®¤ç­”æ¡ˆ</button>
            </div>
        </div>

        <!-- è¶£å‘³é˜…è¯» -->
        <div class="content-section" id="section-reading">
            <div class="reading-card">
                <div class="reading-title">The Lost Key ä¸¢å¤±çš„é’¥åŒ™</div>
                <span class="reading-level">åˆçº§ Â· 50è¯</span>
                <div class="reading-content">
                    <p>Tom <span class="vocab-word" data-word="lost" data-phonetic="/lÉ”Ëst/" data-meaning="ä¸¢å¤±">lost</span> his key. He looked in his <span class="vocab-word" data-word="pocket" data-phonetic="/ËˆpÉ’kÉªt/" data-meaning="å£è¢‹">pocket</span>. No key. He looked on the <span class="vocab-word" data-word="table" data-phonetic="/ËˆteÉªbl/" data-meaning="æ¡Œå­">table</span>. No key. Then his dog came. The key was in the dog's <span class="vocab-word" data-word="mouth" data-phonetic="/maÊŠÎ¸/" data-meaning="å˜´">mouth</span>!</p>
                    <p style="margin-top: 15px; color: var(--text-secondary); font-size: 0.9rem;">æ±¤å§†ä¸¢äº†ä»–çš„é’¥åŒ™ã€‚ä»–æ‰¾äº†æ‰¾å£è¢‹ï¼Œæ²¡æœ‰ã€‚ä»–çœ‹äº†çœ‹æ¡Œå­ï¼Œä¹Ÿæ²¡æœ‰ã€‚ç„¶åä»–çš„ç‹—æ¥äº†ã€‚é’¥åŒ™åœ¨ç‹—å˜´é‡Œï¼</p>
                </div>
            </div>
            <div class="reading-card">
                <div class="reading-title">A Good Morning ç¾å¥½çš„æ—©æ™¨</div>
                <span class="reading-level">åˆçº§ Â· 60è¯</span>
                <div class="reading-content">
                    <p>Every <span class="vocab-word" data-word="morning" data-phonetic="/ËˆmÉ”ËnÉªÅ‹/" data-meaning="æ—©æ™¨">morning</span>, I wake up at seven. I <span class="vocab-word" data-word="brush" data-phonetic="/brÊŒÊƒ/" data-meaning="åˆ·">brush</span> my teeth and wash my <span class="vocab-word" data-word="face" data-phonetic="/feÉªs/" data-meaning="è„¸">face</span>. Then I eat <span class="vocab-word" data-word="breakfast" data-phonetic="/ËˆbrekfÉ™st/" data-meaning="æ—©é¤">breakfast</span> with my family. I love eggs and milk. After breakfast, I go to <span class="vocab-word" data-word="school" data-phonetic="/skuËl/" data-meaning="å­¦æ ¡">school</span>.</p>
                    <p style="margin-top: 15px; color: var(--text-secondary); font-size: 0.9rem;">æ¯å¤©æ—©æ™¨ï¼Œæˆ‘ä¸ƒç‚¹èµ·åºŠã€‚æˆ‘åˆ·ç‰™æ´—è„¸ã€‚ç„¶åå’Œå®¶äººä¸€èµ·åƒæ—©é¤ã€‚æˆ‘å–œæ¬¢é¸¡è›‹å’Œç‰›å¥¶ã€‚åƒå®Œæ—©é¤åï¼Œæˆ‘å»ä¸Šå­¦ã€‚</p>
                </div>
            </div>
            <div class="reading-card">
                <div class="reading-title">At the Market åœ¨å¸‚åœº</div>
                <span class="reading-level">ä¸­çº§ Â· 80è¯</span>
                <div class="reading-content">
                    <p>Last <span class="vocab-word" data-word="Saturday" data-phonetic="/ËˆsÃ¦tÉ™rdeÉª/" data-meaning="æ˜ŸæœŸå…­">Saturday</span>, I went to the <span class="vocab-word" data-word="market" data-phonetic="/ËˆmÉ‘ËkÉªt/" data-meaning="å¸‚åœº">market</span> with my mother. We <span class="vocab-word" data-word="bought" data-phonetic="/bÉ”Ët/" data-meaning="ä¹°äº†(buyçš„è¿‡å»å¼)">bought</span> many things: fresh <span class="vocab-word" data-word="vegetables" data-phonetic="/ËˆvedÊ’tÉ™blz/" data-meaning="è”¬èœ">vegetables</span>, red apples, and some fish. The fish was very <span class="vocab-word" data-word="cheap" data-phonetic="/tÊƒiËp/" data-meaning="ä¾¿å®œçš„">cheap</span>. My mother was <span class="vocab-word" data-word="happy" data-phonetic="/ËˆhÃ¦pi/" data-meaning="é«˜å…´çš„">happy</span>. We carried the bags home together.</p>
                    <p style="margin-top: 15px; color: var(--text-secondary); font-size: 0.9rem;">ä¸Šå‘¨å…­ï¼Œæˆ‘å’Œå¦ˆå¦ˆå»äº†å¸‚åœºã€‚æˆ‘ä»¬ä¹°äº†å¾ˆå¤šä¸œè¥¿ï¼šæ–°é²œçš„è”¬èœã€çº¢è‹¹æœå’Œä¸€äº›é±¼ã€‚é±¼å¾ˆä¾¿å®œã€‚å¦ˆå¦ˆå¾ˆé«˜å…´ã€‚æˆ‘ä»¬ä¸€èµ·æç€è¢‹å­å›å®¶ã€‚</p>
                </div>
            </div>
        </div>
    </div>

    <!-- è®¾ç½®é¢æ¿ -->
    <div class="settings-overlay" id="settingsOverlay" onclick="toggleSettings()"></div>
    <div class="settings-panel" id="settingsPanel">
        <div class="settings-header">
            <span class="settings-title">âš™ï¸ å­¦ä¹ è®¾ç½®</span>
            <button class="close-btn" onclick="toggleSettings()">âœ•</button>
        </div>
        <div class="settings-content">
            <div class="setting-group">
                <label class="setting-label">ğŸ“ æ¯æ—¥å­¦ä¹ å•è¯æ•°</label>
                <p class="setting-description">æ ¹æ®ä½ çš„æ—¶é—´å®‰æ’ï¼Œè°ƒæ•´æ¯å¤©éœ€è¦å­¦ä¹ çš„æ–°å•è¯æ•°é‡</p>
                <input type="range" class="setting-slider" id="dailyWordsSlider" min="5" max="30" value="15" oninput="updateSliderValue('dailyWords', this.value)">
                <div class="slider-value"><span id="dailyWordsValue">15</span> ä¸ªå•è¯/å¤©</div>
            </div>
            <div class="setting-group">
                <label class="setting-label">ğŸ”„ å¤ä¹ å‘¨æœŸ</label>
                <p class="setting-description">è®¾ç½®å·²å­¦å•è¯çš„å¤ä¹ é—´éš”ï¼Œå¸®åŠ©åŠ æ·±è®°å¿†</p>
                <select class="setting-input" id="reviewCycle">
                    <option value="1">æ¯å¤©å¤ä¹ </option>
                    <option value="2" selected>æ¯2å¤©å¤ä¹ </option>
                    <option value="3">æ¯3å¤©å¤ä¹ </option>
                    <option value="7">æ¯å‘¨å¤ä¹ </option>
                </select>
            </div>
            <div class="setting-group">
                <label class="setting-label">ğŸ“š è¯åº“éš¾åº¦</label>
                <p class="setting-description">é€‰æ‹©é€‚åˆä½ å½“å‰æ°´å¹³çš„è¯åº“</p>
                <select class="setting-input" id="difficulty">
                    <option value="beginner" selected>å…¥é—¨çº§ (500è¯)</option>
                    <option value="elementary">åŸºç¡€çº§ (1000è¯)</option>
                    <option value="intermediate">è¿›é˜¶çº§ (2000è¯)</option>
                    <option value="advanced">é«˜çº§ (3000è¯)</option>
                </select>
            </div>
            <div class="setting-group">
                <label class="setting-label">ğŸ”Š å‘éŸ³è®¾ç½®</label>
                <p class="setting-description">é€‰æ‹©è‹±è¯­å‘éŸ³å£éŸ³</p>
                <select class="setting-input" id="accent">
                    <option value="us" selected>ç¾å¼å‘éŸ³</option>
                    <option value="uk">è‹±å¼å‘éŸ³</option>
                </select>
            </div>
            <div class="setting-group">
                <label class="setting-label">â° å­¦ä¹ æé†’</label>
                <p class="setting-description">è®¾ç½®æ¯æ—¥å­¦ä¹ æé†’æ—¶é—´ï¼ˆéœ€è¦å¼€å¯é€šçŸ¥æƒé™ï¼‰</p>
                <input type="time" class="setting-input" id="reminderTime" value="09:00">
            </div>
            <button class="btn btn-primary" style="width: 100%; margin-top: 20px;" onclick="saveSettings()">ğŸ’¾ ä¿å­˜è®¾ç½®</button>
        </div>
    </div>

    <!-- è¯æ±‡æç¤º -->
    <div class="vocab-tooltip" id="vocabTooltip">
        <div class="tooltip-word" id="tooltipWord"></div>
        <div class="tooltip-phonetic" id="tooltipPhonetic"></div>
        <div class="tooltip-meaning" id="tooltipMeaning"></div>
    </div>

    <!-- å®Œæˆå¼¹çª— -->
    <div class="completion-modal" id="completionModal">
        <div class="completion-content">
            <div class="completion-icon">ğŸ‰</div>
            <div class="completion-title">å¤ªæ£’äº†ï¼</div>
            <div class="completion-message">ä½ å®Œæˆäº†ä»Šå¤©çš„å­¦ä¹ ä»»åŠ¡</div>
            <div class="completion-stats">
                <div class="completion-stat">
                    <div class="completion-stat-value" id="completionNew">15</div>
                    <div class="completion-stat-label">æ–°å­¦å•è¯</div>
                </div>
                <div class="completion-stat">
                    <div class="completion-stat-value" id="completionReview">8</div>
                    <div class="completion-stat-label">å¤ä¹ å•è¯</div>
                </div>
            </div>
            <button class="btn btn-primary" style="width: 100%;" onclick="closeCompletion()">ç»§ç»­å­¦ä¹ </button>
        </div>
    </div>

    <script>
        // ==================== è¯åº“æ•°æ® ====================
        const vocabulary = {
            // åŸºç¡€é—®å€™ç±»
            greetings: [
                { word: "hello", phonetic: "/hÉ™ËˆloÊŠ/", chinese: "ä½ å¥½ï¼›å–‚", category: "æ—¥å¸¸é—®å€™", example: "Hello, how are you today?", exampleCn: "ä½ å¥½ï¼Œä½ ä»Šå¤©æ€ä¹ˆæ ·ï¼Ÿ" },
                { word: "goodbye", phonetic: "/É¡ÊŠdËˆbaÉª/", chinese: "å†è§", category: "æ—¥å¸¸é—®å€™", example: "Goodbye! See you tomorrow.", exampleCn: "å†è§ï¼æ˜å¤©è§ã€‚" },
                { word: "thank", phonetic: "/Î¸Ã¦Å‹k/", chinese: "è°¢è°¢ï¼›æ„Ÿè°¢", category: "æ—¥å¸¸é—®å€™", example: "Thank you for your help.", exampleCn: "è°¢è°¢ä½ çš„å¸®åŠ©ã€‚" },
                { word: "please", phonetic: "/pliËz/", chinese: "è¯·", category: "æ—¥å¸¸é—®å€™", example: "Please sit down.", exampleCn: "è¯·åã€‚" },
                { word: "sorry", phonetic: "/ËˆsÉ’ri/", chinese: "å¯¹ä¸èµ·ï¼›æŠ±æ­‰", category: "æ—¥å¸¸é—®å€™", example: "I'm sorry for being late.", exampleCn: "å¯¹ä¸èµ·æˆ‘è¿Ÿåˆ°äº†ã€‚" },
                { word: "welcome", phonetic: "/ËˆwelkÉ™m/", chinese: "æ¬¢è¿", category: "æ—¥å¸¸é—®å€™", example: "Welcome to my home!", exampleCn: "æ¬¢è¿æ¥åˆ°æˆ‘å®¶ï¼" },
                { word: "morning", phonetic: "/ËˆmÉ”ËnÉªÅ‹/", chinese: "æ—©ä¸Šï¼›ä¸Šåˆ", category: "æ—¶é—´", example: "Good morning, everyone!", exampleCn: "å¤§å®¶æ—©ä¸Šå¥½ï¼" },
                { word: "afternoon", phonetic: "/ËŒÉ‘ËftÉ™rËˆnuËn/", chinese: "ä¸‹åˆ", category: "æ—¶é—´", example: "See you this afternoon.", exampleCn: "ä¸‹åˆè§ã€‚" },
                { word: "evening", phonetic: "/ËˆiËvnÉªÅ‹/", chinese: "å‚æ™šï¼›æ™šä¸Š", category: "æ—¶é—´", example: "Good evening, sir.", exampleCn: "æ™šä¸Šå¥½ï¼Œå…ˆç”Ÿã€‚" },
                { word: "night", phonetic: "/naÉªt/", chinese: "å¤œæ™š", category: "æ—¶é—´", example: "Good night, sleep well.", exampleCn: "æ™šå®‰ï¼Œç¡ä¸ªå¥½è§‰ã€‚" },
                { word: "today", phonetic: "/tÉ™ËˆdeÉª/", chinese: "ä»Šå¤©", category: "æ—¶é—´", example: "What day is today?", exampleCn: "ä»Šå¤©æ˜¯æ˜ŸæœŸå‡ ï¼Ÿ" },
                { word: "tomorrow", phonetic: "/tÉ™ËˆmÉ’roÊŠ/", chinese: "æ˜å¤©", category: "æ—¶é—´", example: "I will call you tomorrow.", exampleCn: "æˆ‘æ˜å¤©ç»™ä½ æ‰“ç”µè¯ã€‚" },
                { word: "yesterday", phonetic: "/ËˆjestÉ™rdeÉª/", chinese: "æ˜¨å¤©", category: "æ—¶é—´", example: "I saw him yesterday.", exampleCn: "æˆ‘æ˜¨å¤©è§åˆ°ä»–äº†ã€‚" },
                { word: "name", phonetic: "/neÉªm/", chinese: "åå­—", category: "ä»‹ç»", example: "My name is Tom.", exampleCn: "æˆ‘çš„åå­—æ˜¯æ±¤å§†ã€‚" },
                { word: "friend", phonetic: "/frend/", chinese: "æœ‹å‹", category: "äººç‰©", example: "She is my best friend.", exampleCn: "å¥¹æ˜¯æˆ‘æœ€å¥½çš„æœ‹å‹ã€‚" }
            ],
            // å¤©æ°”ç±»
            weather: [
                { word: "weather", phonetic: "/ËˆweÃ°É™r/", chinese: "å¤©æ°”", category: "å¤©æ°”", example: "How's the weather today?", exampleCn: "ä»Šå¤©å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ" },
                { word: "sunny", phonetic: "/ËˆsÊŒni/", chinese: "æ™´æœ—çš„", category: "å¤©æ°”", example: "It's a sunny day.", exampleCn: "ä»Šå¤©æ˜¯æ™´å¤©ã€‚" },
                { word: "cloudy", phonetic: "/ËˆklaÊŠdi/", chinese: "å¤šäº‘çš„", category: "å¤©æ°”", example: "It's cloudy today.", exampleCn: "ä»Šå¤©å¤šäº‘ã€‚" },
                { word: "rainy", phonetic: "/ËˆreÉªni/", chinese: "ä¸‹é›¨çš„", category: "å¤©æ°”", example: "Bring an umbrella, it's rainy.", exampleCn: "å¸¦æŠŠä¼ï¼Œåœ¨ä¸‹é›¨ã€‚" },
                { word: "cold", phonetic: "/koÊŠld/", chinese: "å†·çš„", category: "å¤©æ°”", example: "It's very cold outside.", exampleCn: "å¤–é¢å¾ˆå†·ã€‚" },
                { word: "hot", phonetic: "/hÉ’t/", chinese: "çƒ­çš„", category: "å¤©æ°”", example: "Summer is very hot here.", exampleCn: "è¿™é‡Œå¤å¤©å¾ˆçƒ­ã€‚" },
                { word: "warm", phonetic: "/wÉ”Ërm/", chinese: "æ¸©æš–çš„", category: "å¤©æ°”", example: "Spring is warm and nice.", exampleCn: "æ˜¥å¤©æ¸©æš–å®œäººã€‚" },
                { word: "cool", phonetic: "/kuËl/", chinese: "å‡‰çˆ½çš„", category: "å¤©æ°”", example: "The evening air is cool.", exampleCn: "æ™šä¸Šçš„ç©ºæ°”å¾ˆå‡‰çˆ½ã€‚" },
                { word: "wind", phonetic: "/wÉªnd/", chinese: "é£", category: "å¤©æ°”", example: "The wind is strong today.", exampleCn: "ä»Šå¤©é£å¾ˆå¤§ã€‚" },
                { word: "snow", phonetic: "/snoÊŠ/", chinese: "é›ª", category: "å¤©æ°”", example: "Children love to play in the snow.", exampleCn: "å­©å­ä»¬å–œæ¬¢åœ¨é›ªä¸­ç©è€ã€‚" },
                { word: "rain", phonetic: "/reÉªn/", chinese: "é›¨", category: "å¤©æ°”", example: "I like the sound of rain.", exampleCn: "æˆ‘å–œæ¬¢é›¨å£°ã€‚" },
                { word: "umbrella", phonetic: "/ÊŒmËˆbrelÉ™/", chinese: "é›¨ä¼", category: "ç‰©å“", example: "Don't forget your umbrella.", exampleCn: "åˆ«å¿˜äº†å¸¦ä¼ã€‚" },
                { word: "temperature", phonetic: "/ËˆtemprÉ™tÊƒÉ™r/", chinese: "æ¸©åº¦", category: "å¤©æ°”", example: "The temperature is 25 degrees.", exampleCn: "æ¸©åº¦æ˜¯25åº¦ã€‚" },
                { word: "season", phonetic: "/ËˆsiËzn/", chinese: "å­£èŠ‚", category: "æ—¶é—´", example: "What's your favorite season?", exampleCn: "ä½ æœ€å–œæ¬¢å“ªä¸ªå­£èŠ‚ï¼Ÿ" },
                { word: "spring", phonetic: "/sprÉªÅ‹/", chinese: "æ˜¥å¤©", category: "æ—¶é—´", example: "Flowers bloom in spring.", exampleCn: "èŠ±åœ¨æ˜¥å¤©å¼€æ”¾ã€‚" }
            ],
            // é¤å…ç±»
            restaurant: [
                { word: "restaurant", phonetic: "/ËˆrestrÉ’nt/", chinese: "é¤å…", category: "åœºæ‰€", example: "Let's go to a restaurant.", exampleCn: "æˆ‘ä»¬å»é¤å…å§ã€‚" },
                { word: "menu", phonetic: "/ËˆmenjuË/", chinese: "èœå•", category: "é¤å…", example: "Can I see the menu, please?", exampleCn: "è¯·ç»™æˆ‘çœ‹ä¸€ä¸‹èœå•å¥½å—ï¼Ÿ" },
                { word: "order", phonetic: "/ËˆÉ”ËrdÉ™r/", chinese: "ç‚¹èœï¼›è®¢è´­", category: "åŠ¨ä½œ", example: "I'd like to order now.", exampleCn: "æˆ‘æƒ³ç°åœ¨ç‚¹é¤ã€‚" },
                { word: "waiter", phonetic: "/ËˆweÉªtÉ™r/", chinese: "æœåŠ¡å‘˜ï¼ˆç”·ï¼‰", category: "äººç‰©", example: "Excuse me, waiter!", exampleCn: "æ‰“æ‰°ä¸€ä¸‹ï¼ŒæœåŠ¡å‘˜ï¼" },
                { word: "bill", phonetic: "/bÉªl/", chinese: "è´¦å•", category: "é¤å…", example: "Can I have the bill, please?", exampleCn: "è¯·ç»™æˆ‘è´¦å•å¥½å—ï¼Ÿ" },
                { word: "delicious", phonetic: "/dÉªËˆlÉªÊƒÉ™s/", chinese: "ç¾å‘³çš„", category: "å½¢å®¹è¯", example: "This food is delicious!", exampleCn: "è¿™é£Ÿç‰©çœŸç¾å‘³ï¼" },
                { word: "hungry", phonetic: "/ËˆhÊŒÅ‹É¡ri/", chinese: "é¥¥é¥¿çš„", category: "æ„Ÿè§‰", example: "I'm very hungry.", exampleCn: "æˆ‘å¾ˆé¥¿ã€‚" },
                { word: "thirsty", phonetic: "/ËˆÎ¸ÉœËrsti/", chinese: "å£æ¸´çš„", category: "æ„Ÿè§‰", example: "I'm thirsty. Can I have some water?", exampleCn: "æˆ‘æ¸´äº†ï¼Œèƒ½ç»™æˆ‘ç‚¹æ°´å—ï¼Ÿ" },
                { word: "breakfast", phonetic: "/ËˆbrekfÉ™st/", chinese: "æ—©é¤", category: "é¤é£Ÿ", example: "What do you want for breakfast?", exampleCn: "ä½ æ—©é¤æƒ³åƒä»€ä¹ˆï¼Ÿ" },
                { word: "lunch", phonetic: "/lÊŒntÊƒ/", chinese: "åˆé¤", category: "é¤é£Ÿ", example: "Let's have lunch together.", exampleCn: "æˆ‘ä»¬ä¸€èµ·åƒåˆé¤å§ã€‚" },
                { word: "dinner", phonetic: "/ËˆdÉªnÉ™r/", chinese: "æ™šé¤", category: "é¤é£Ÿ", example: "What's for dinner tonight?", exampleCn: "ä»Šæ™šæ™šé¤åƒä»€ä¹ˆï¼Ÿ" },
                { word: "drink", phonetic: "/drÉªÅ‹k/", chinese: "é¥®æ–™ï¼›å–", category: "é¤é¥®", example: "What would you like to drink?", exampleCn: "ä½ æƒ³å–ç‚¹ä»€ä¹ˆï¼Ÿ" },
                { word: "coffee", phonetic: "/ËˆkÉ’fi/", chinese: "å’–å•¡", category: "é¥®æ–™", example: "I need a cup of coffee.", exampleCn: "æˆ‘éœ€è¦ä¸€æ¯å’–å•¡ã€‚" },
                { word: "tea", phonetic: "/tiË/", chinese: "èŒ¶", category: "é¥®æ–™", example: "Would you like some tea?", exampleCn: "ä½ æƒ³æ¥ç‚¹èŒ¶å—ï¼Ÿ" },
                { word: "water", phonetic: "/ËˆwÉ”ËtÉ™r/", chinese: "æ°´", category: "é¥®æ–™", example: "A glass of water, please.", exampleCn: "è¯·ç»™æˆ‘ä¸€æ¯æ°´ã€‚" }
            ],
            // é—®è·¯ç±»
            directions: [
                { word: "where", phonetic: "/wer/", chinese: "å“ªé‡Œ", category: "ç–‘é—®è¯", example: "Where is the bank?", exampleCn: "é“¶è¡Œåœ¨å“ªé‡Œï¼Ÿ" },
                { word: "left", phonetic: "/left/", chinese: "å·¦è¾¹", category: "æ–¹å‘", example: "Turn left at the corner.", exampleCn: "åœ¨æ‹è§’å¤„å·¦è½¬ã€‚" },
                { word: "right", phonetic: "/raÉªt/", chinese: "å³è¾¹", category: "æ–¹å‘", example: "Go right, then straight.", exampleCn: "å‘å³èµ°ï¼Œç„¶åç›´èµ°ã€‚" },
                { word: "straight", phonetic: "/streÉªt/", chinese: "ç›´çš„ï¼›ç›´èµ°", category: "æ–¹å‘", example: "Go straight for two blocks.", exampleCn: "ç›´èµ°ä¸¤ä¸ªè¡—åŒºã€‚" },
                { word: "near", phonetic: "/nÉªr/", chinese: "è¿‘çš„ï¼›é™„è¿‘", category: "ä½ç½®", example: "Is there a park near here?", exampleCn: "è¿™é™„è¿‘æœ‰å…¬å›­å—ï¼Ÿ" },
                { word: "far", phonetic: "/fÉ‘Ër/", chinese: "è¿œçš„", category: "ä½ç½®", example: "Is it far from here?", exampleCn: "ç¦»è¿™é‡Œè¿œå—ï¼Ÿ" },
                { word: "street", phonetic: "/striËt/", chinese: "è¡—é“", category: "åœºæ‰€", example: "Walk down this street.", exampleCn: "æ²¿ç€è¿™æ¡è¡—èµ°ã€‚" },
                { word: "corner", phonetic: "/ËˆkÉ”ËrnÉ™r/", chinese: "æ‹è§’ï¼›è§’è½", category: "ä½ç½®", example: "The shop is on the corner.", exampleCn: "å•†åº—åœ¨æ‹è§’å¤„ã€‚" },
                { word: "across", phonetic: "/É™ËˆkrÉ’s/", chinese: "ç©¿è¿‡ï¼›å¯¹é¢", category: "ä½ç½®", example: "It's across the street.", exampleCn: "å®ƒåœ¨è¡—å¯¹é¢ã€‚" },
                { word: "next", phonetic: "/nekst/", chinese: "ä¸‹ä¸€ä¸ªï¼›æ—è¾¹çš„", category: "ä½ç½®", example: "It's next to the hospital.", exampleCn: "å®ƒåœ¨åŒ»é™¢æ—è¾¹ã€‚" },
                { word: "between", phonetic: "/bÉªËˆtwiËn/", chinese: "åœ¨...ä¹‹é—´", category: "ä½ç½®", example: "The cafe is between the bank and the hotel.", exampleCn: "å’–å•¡é¦†åœ¨é“¶è¡Œå’Œé…’åº—ä¹‹é—´ã€‚" },
                { word: "map", phonetic: "/mÃ¦p/", chinese: "åœ°å›¾", category: "ç‰©å“", example: "Do you have a map?", exampleCn: "ä½ æœ‰åœ°å›¾å—ï¼Ÿ" },
                { word: "station", phonetic: "/ËˆsteÉªÊƒn/", chinese: "è½¦ç«™", category: "åœºæ‰€", example: "How do I get to the station?", exampleCn: "æˆ‘æ€ä¹ˆå»è½¦ç«™ï¼Ÿ" },
                { word: "stop", phonetic: "/stÉ’p/", chinese: "åœæ­¢ï¼›ç«™", category: "äº¤é€š", example: "Get off at the next stop.", exampleCn: "åœ¨ä¸‹ä¸€ç«™ä¸‹è½¦ã€‚" },
                { word: "walk", phonetic: "/wÉ”Ëk/", chinese: "èµ°è·¯", category: "åŠ¨ä½œ", example: "It's a five-minute walk.", exampleCn: "æ­¥è¡Œäº”åˆ†é’Ÿã€‚" }
            ],
            // è´­ç‰©ç±»
            shopping: [
                { word: "shop", phonetic: "/ÊƒÉ’p/", chinese: "å•†åº—ï¼›è´­ç‰©", category: "åœºæ‰€", example: "I love to shop on weekends.", exampleCn: "æˆ‘å–œæ¬¢å‘¨æœ«è´­ç‰©ã€‚" },
                { word: "buy", phonetic: "/baÉª/", chinese: "ä¹°", category: "åŠ¨ä½œ", example: "I want to buy a new phone.", exampleCn: "æˆ‘æƒ³ä¹°ä¸€éƒ¨æ–°æ‰‹æœºã€‚" },
                { word: "sell", phonetic: "/sel/", chinese: "å–", category: "åŠ¨ä½œ", example: "They sell fresh fruit here.", exampleCn: "ä»–ä»¬è¿™é‡Œå–æ–°é²œæ°´æœã€‚" },
                { word: "price", phonetic: "/praÉªs/", chinese: "ä»·æ ¼", category: "è´­ç‰©", example: "What's the price of this?", exampleCn: "è¿™ä¸ªå¤šå°‘é’±ï¼Ÿ" },
                { word: "cheap", phonetic: "/tÊƒiËp/", chinese: "ä¾¿å®œçš„", category: "å½¢å®¹è¯", example: "This is very cheap.", exampleCn: "è¿™ä¸ªå¾ˆä¾¿å®œã€‚" },
                { word: "expensive", phonetic: "/ÉªkËˆspensÉªv/", chinese: "æ˜‚è´µçš„", category: "å½¢å®¹è¯", example: "That bag is too expensive.", exampleCn: "é‚£ä¸ªåŒ…å¤ªè´µäº†ã€‚" },
                { word: "money", phonetic: "/ËˆmÊŒni/", chinese: "é’±", category: "è´­ç‰©", example: "I don't have enough money.", exampleCn: "æˆ‘æ²¡æœ‰è¶³å¤Ÿçš„é’±ã€‚" },
                { word: "pay", phonetic: "/peÉª/", chinese: "ä»˜æ¬¾", category: "åŠ¨ä½œ", example: "Can I pay by card?", exampleCn: "æˆ‘å¯ä»¥åˆ·å¡å—ï¼Ÿ" },
                { word: "cash", phonetic: "/kÃ¦Êƒ/", chinese: "ç°é‡‘", category: "è´­ç‰©", example: "I only have cash.", exampleCn: "æˆ‘åªæœ‰ç°é‡‘ã€‚" },
                { word: "card", phonetic: "/kÉ‘Ërd/", chinese: "å¡ç‰‡ï¼›é“¶è¡Œå¡", category: "è´­ç‰©", example: "Do you accept credit cards?", exampleCn: "ä½ ä»¬æ¥å—ä¿¡ç”¨å¡å—ï¼Ÿ" },
                { word: "size", phonetic: "/saÉªz/", chinese: "å°ºå¯¸ï¼›å¤§å°", category: "è´­ç‰©", example: "What size do you need?", exampleCn: "ä½ éœ€è¦ä»€ä¹ˆå°ºå¯¸ï¼Ÿ" },
                { word: "color", phonetic: "/ËˆkÊŒlÉ™r/", chinese: "é¢œè‰²", category: "è´­ç‰©", example: "Do you have other colors?", exampleCn: "ä½ ä»¬æœ‰å…¶ä»–é¢œè‰²å—ï¼Ÿ" },
                { word: "try", phonetic: "/traÉª/", chinese: "å°è¯•ï¼›è¯•ç©¿", category: "åŠ¨ä½œ", example: "Can I try this on?", exampleCn: "æˆ‘èƒ½è¯•ç©¿ä¸€ä¸‹å—ï¼Ÿ" },
                { word: "bag", phonetic: "/bÃ¦É¡/", chinese: "è¢‹å­ï¼›åŒ…", category: "ç‰©å“", example: "Do you need a bag?", exampleCn: "ä½ éœ€è¦è¢‹å­å—ï¼Ÿ" },
                { word: "change", phonetic: "/tÊƒeÉªndÊ’/", chinese: "é›¶é’±ï¼›æ”¹å˜", category: "è´­ç‰©", example: "Here's your change.", exampleCn: "è¿™æ˜¯ä½ çš„é›¶é’±ã€‚" }
            ]
        };

        // ==================== ç»ƒä¹ é¢˜æ•°æ® ====================
        const quizData = [
            { type: "fill", sentence: "I want to ___ a cup of coffee.", answer: "drink", options: ["drink", "eat", "buy", "make"] },
            { type: "fill", sentence: "The weather is very ___ today. I need a jacket.", answer: "cold", options: ["cold", "hot", "sunny", "happy"] },
            { type: "fill", sentence: "Can I have the ___, please? I want to pay.", answer: "bill", options: ["menu", "bill", "table", "water"] },
            { type: "fill", sentence: "Turn ___ at the corner, then go straight.", answer: "left", options: ["left", "right", "up", "down"] },
            { type: "fill", sentence: "This bag is too ___. I can't afford it.", answer: "expensive", options: ["cheap", "expensive", "big", "small"] },
            { type: "fill", sentence: "Good ___, how did you sleep?", answer: "morning", options: ["morning", "evening", "night", "afternoon"] },
            { type: "fill", sentence: "I'm very ___. I didn't eat breakfast.", answer: "hungry", options: ["hungry", "thirsty", "happy", "tired"] },
            { type: "fill", sentence: "Is the station ___ from here?", answer: "far", options: ["far", "near", "next", "across"] },
            { type: "fill", sentence: "What ___ do you need? Small, medium, or large?", answer: "size", options: ["size", "color", "price", "number"] },
            { type: "fill", sentence: "It's ___ outside. Take an umbrella.", answer: "rainy", options: ["rainy", "sunny", "warm", "cool"] }
        ];

        // ==================== åº”ç”¨çŠ¶æ€ ====================
        let appState = {
            currentTab: 'learn',
            currentWordIndex: 0,
            todayWords: [],
            learnedWords: [],
            masteredWords: [],
            streakDays: 3,
            settings: {
                dailyWords: 15,
                reviewCycle: 2,
                difficulty: 'beginner',
                accent: 'us',
                reminderTime: '09:00'
            },
            currentQuizIndex: 0,
            selectedAnswer: null
        };

        // ==================== åˆå§‹åŒ– ====================
        function init() {
            loadState();
            prepareTodayWords();
            updateUI();
            setupVocabTooltips();
        }

        function loadState() {
            const saved = localStorage.getItem('vocabPlanetState');
            if (saved) {
                const parsed = JSON.parse(saved);
                appState = { ...appState, ...parsed };
            }
        }

        function saveState() {
            localStorage.setItem('vocabPlanetState', JSON.stringify(appState));
        }

        function prepareTodayWords() {
            if (appState.todayWords.length === 0) {
                // åˆå¹¶æ‰€æœ‰è¯åº“
                const allWords = Object.values(vocabulary).flat();
                // è¿‡æ»¤å·²å­¦è¿‡çš„è¯
                const unlearnedWords = allWords.filter(w => 
                    !appState.learnedWords.includes(w.word)
                );
                // å–ä»Šæ—¥å­¦ä¹ æ•°é‡
                appState.todayWords = unlearnedWords.slice(0, appState.settings.dailyWords);
            }
            document.getElementById('totalWords').textContent = appState.todayWords.length;
        }

        // ==================== UIæ›´æ–° ====================
        function updateUI() {
            // æ›´æ–°ç»Ÿè®¡
            document.getElementById('streakDays').textContent = appState.streakDays;
            document.getElementById('learnedCount').textContent = appState.learnedWords.length;
            document.getElementById('masteredCount').textContent = appState.masteredWords.length;
            document.getElementById('todayCount').textContent = appState.currentWordIndex;
            
            // æ›´æ–°è¿›åº¦
            const totalVocab = 3000;
            const progress = ((appState.learnedWords.length / totalVocab) * 100).toFixed(1);
            document.getElementById('progressPercent').textContent = progress;
            document.getElementById('progressFill').style.width = progress + '%';
            
            // æ›´æ–°å½“å‰å•è¯
            updateWordCard();
        }

        function updateWordCard() {
            if (appState.currentWordIndex >= appState.todayWords.length) {
                showCompletion();
                return;
            }

            const word = appState.todayWords[appState.currentWordIndex];
            document.getElementById('currentWordIndex').textContent = appState.currentWordIndex + 1;
            document.getElementById('wordEnglish').textContent = word.word;
            document.getElementById('wordPhonetic').textContent = word.phonetic;
            document.getElementById('wordChinese').textContent = word.chinese;
            document.getElementById('wordCategory').textContent = word.category;
            
            // é«˜äº®ä¾‹å¥ä¸­çš„å•è¯
            const highlightedExample = word.example.replace(
                new RegExp(`(${word.word})`, 'gi'),
                '<span class="highlight">$1</span>'
            );
            document.getElementById('exampleEnglish').innerHTML = highlightedExample;
            document.getElementById('exampleChinese').textContent = word.exampleCn;
        }

        // ==================== æ ‡ç­¾åˆ‡æ¢ ====================
        function switchTab(tab) {
            appState.currentTab = tab;
            
            // æ›´æ–°æ ‡ç­¾æ ·å¼
            document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
            document.querySelector(`[data-tab="${tab}"]`).classList.add('active');
            
            // åˆ‡æ¢å†…å®¹
            document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
            document.getElementById(`section-${tab}`).classList.add('active');
        }

        // ==================== å­¦ä¹ åŠŸèƒ½ ====================
        function markWord(status) {
            const word = appState.todayWords[appState.currentWordIndex];
            
            if (status === 'know') {
                if (!appState.learnedWords.includes(word.word)) {
                    appState.learnedWords.push(word.word);
                }
            }
            
            appState.currentWordIndex++;
            updateUI();
            saveState();

            // æ·»åŠ åŠ¨ç”»æ•ˆæœ
            const card = document.getElementById('wordCard');
            card.style.transform = 'translateX(50px)';
            card.style.opacity = '0';
            setTimeout(() => {
                card.style.transition = 'none';
                card.style.transform = 'translateX(-50px)';
                setTimeout(() => {
                    card.style.transition = 'all 0.3s';
                    card.style.transform = 'translateX(0)';
                    card.style.opacity = '1';
                }, 50);
            }, 200);
        }

        function speakWord() {
            const word = appState.todayWords[appState.currentWordIndex];
            if (word && 'speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(word.word);
                utterance.lang = appState.settings.accent === 'us' ? 'en-US' : 'en-GB';
                utterance.rate = 0.8;
                speechSynthesis.speak(utterance);
            }
        }

        // ==================== æƒ…æ™¯ç»ƒä¹  ====================
        function startScenario(scenario) {
            // åˆ‡æ¢åˆ°å­¦ä¹ æ ‡ç­¾å¹¶åŠ è½½å¯¹åº”æƒ…æ™¯è¯æ±‡
            if (vocabulary[scenario]) {
                appState.todayWords = vocabulary[scenario];
                appState.currentWordIndex = 0;
                document.getElementById('totalWords').textContent = appState.todayWords.length;
                switchTab('learn');
                updateWordCard();
            }
        }

        // ==================== ç»ƒä¹ åŠŸèƒ½ ====================
        function loadQuiz() {
            if (appState.currentQuizIndex >= quizData.length) {
                appState.currentQuizIndex = 0;
            }
            const quiz = quizData[appState.currentQuizIndex];
            
            document.getElementById('quizSentence').innerHTML = quiz.sentence.replace('___', '<span class="blank"></span>');
            
            const optionsHtml = quiz.options.map(opt => 
                `<button class="quiz-option" onclick="selectOption(this, '${opt}')">${opt}</button>`
            ).join('');
            document.getElementById('quizOptions').innerHTML = optionsHtml;
            
            appState.selectedAnswer = null;
        }

        function selectOption(element, answer) {
            document.querySelectorAll('.quiz-option').forEach(opt => opt.classList.remove('selected'));
            element.classList.add('selected');
            appState.selectedAnswer = answer;
        }

        function checkAnswer() {
            if (!appState.selectedAnswer) {
                alert('è¯·å…ˆé€‰æ‹©ä¸€ä¸ªç­”æ¡ˆï¼');
                return;
            }
            
            const quiz = quizData[appState.currentQuizIndex];
            const options = document.querySelectorAll('.quiz-option');
            
            options.forEach(opt => {
                if (opt.textContent === quiz.answer) {
                    opt.classList.add('correct');
                } else if (opt.classList.contains('selected') && opt.textContent !== quiz.answer) {
                    opt.classList.add('wrong');
                }
            });
            
            setTimeout(() => {
                appState.currentQuizIndex++;
                loadQuiz();
            }, 1500);
        }

        function skipQuiz() {
            appState.currentQuizIndex++;
            loadQuiz();
        }

        // ==================== é˜…è¯»åŠŸèƒ½ ====================
        function setupVocabTooltips() {
            document.querySelectorAll('.vocab-word').forEach(word => {
                word.addEventListener('click', function(e) {
                    const tooltip = document.getElementById('vocabTooltip');
                    tooltip.querySelector('#tooltipWord').textContent = this.dataset.word;
                    tooltip.querySelector('#tooltipPhonetic').textContent = this.dataset.phonetic;
                    tooltip.querySelector('#tooltipMeaning').textContent = this.dataset.meaning;
                    
                    const rect = this.getBoundingClientRect();
                    tooltip.style.left = rect.left + 'px';
                    tooltip.style.top = (rect.bottom + 10) + 'px';
                    tooltip.classList.add('show');
                    
                    // å‘éŸ³
                    if ('speechSynthesis' in window) {
                        const utterance = new SpeechSynthesisUtterance(this.dataset.word);
                        utterance.lang = 'en-US';
                        utterance.rate = 0.8;
                        speechSynthesis.speak(utterance);
                    }
                });
            });
            
            document.addEventListener('click', function(e) {
                if (!e.target.classList.contains('vocab-word')) {
                    document.getElementById('vocabTooltip').classList.remove('show');
                }
            });
        }

        // ==================== è®¾ç½®åŠŸèƒ½ ====================
        function toggleSettings() {
            document.getElementById('settingsPanel').classList.toggle('open');
            document.getElementById('settingsOverlay').classList.toggle('open');
        }

        function updateSliderValue(type, value) {
            document.getElementById(`${type}Value`).textContent = value;
            appState.settings.dailyWords = parseInt(value);
        }

        function saveSettings() {
            appState.settings.dailyWords = parseInt(document.getElementById('dailyWordsSlider').value);
            appState.settings.reviewCycle = parseInt(document.getElementById('reviewCycle').value);
            appState.settings.difficulty = document.getElementById('difficulty').value;
            appState.settings.accent = document.getElementById('accent').value;
            appState.settings.reminderTime = document.getElementById('reminderTime').value;
            
            saveState();
            toggleSettings();
            
            // é‡æ–°å‡†å¤‡ä»Šæ—¥å•è¯
            appState.todayWords = [];
            appState.currentWordIndex = 0;
            prepareTodayWords();
            updateUI();
            
            alert('è®¾ç½®å·²ä¿å­˜ï¼');
        }

        // ==================== å®Œæˆå¼¹çª— ====================
        function showCompletion() {
            document.getElementById('completionNew').textContent = appState.todayWords.length;
            document.getElementById('completionReview').textContent = Math.floor(appState.todayWords.length * 0.5);
            document.getElementById('completionModal').classList.add('show');
        }

        function closeCompletion() {
            document.getElementById('completionModal').classList.remove('show');
            // é‡ç½®ä»Šæ—¥å­¦ä¹ 
            appState.todayWords = [];
            appState.currentWordIndex = 0;
            appState.streakDays++;
            prepareTodayWords();
            updateUI();
            saveState();
        }

        // åˆå§‹åŒ–åº”ç”¨
        init();
        loadQuiz();
    </script>
</body>
</html>
